(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b947cbfa"],{2031:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"fl-container"},[r("el-form",{attrs:{inline:!0}},[r("el-form-item",[r("el-button",{staticClass:"el-icon-search",attrs:{type:"primary"},on:{click:function(t){return e.handleQuery()}}},[e._v("查询")]),r("el-button",{staticClass:"el-icon-plus",attrs:{type:"primary"},on:{click:function(t){return e.openAddUserDialog()}}},[e._v("新增")])],1)],1),r("el-table",{staticClass:"wl-table",attrs:{data:e.list,"header-cell-style":{background:"#f4f4f5","text-align":"center"},border:""}},[r("el-table-column",{attrs:{prop:"id","show-overflow-tooltip":!0,label:"编号","min-width":"60",width:"80",align:"center"}}),r("el-table-column",{attrs:{prop:"username","show-overflow-tooltip":!0,label:"帐号","min-width":"80",align:"center"}}),r("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,label:"姓名","min-width":"80",align:"center"}}),r("el-table-column",{attrs:{prop:"statusDesc","show-overflow-tooltip":!0,label:"状态","min-width":"100",align:"center"}}),r("el-table-column",{attrs:{prop:"createTimeStr","show-overflow-tooltip":!0,label:"创建时间","min-width":"100",align:"center"}}),r("el-table-column",{attrs:{prop:"editTimeStr","show-overflow-tooltip":!0,label:"修改时间","min-width":"100",align:"center"}}),r("el-table-column",{attrs:{prop:"operate",label:"操作",width:"210",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?r("el-link",{attrs:{type:"primary",icon:"el-icon-switch-button"},nativeOn:{click:function(r){return e.stopOrOpen(t.row.username,1)}}},[e._v("启用")]):e._e(),1===t.row.status?r("el-link",{attrs:{type:"danger",icon:"el-icon-switch-button"},nativeOn:{click:function(r){return e.stopOrOpen(t.row.username,0)}}},[e._v("停用")]):e._e(),r("el-link",{attrs:{type:"primary",icon:"el-icon-edit"},nativeOn:{click:function(r){return e.openUserDialog(t.row)}}},[e._v("修改")]),r("el-link",{attrs:{type:"primary",icon:"el-icon-key"},nativeOn:{click:function(r){return e.openPwdDialog(t.row)}}},[e._v("修改密码")])]}}])})],1),e.pageshow?r("el-pagination",{staticClass:"wl-pagination",attrs:{background:"",layout:"total, sizes, prev, pager, next","current-page":e.currentPage,"page-sizes":[10,15,20,50,100,150,200],"page-size":e.pageSize,total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e(),r("el-dialog",{attrs:{title:"新增用户",visible:e.addDialogVisible,"close-on-click-modal":!1,"modal-append-to-body":!1,width:"40%"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[r("el-form",{ref:"addform",attrs:{model:e.addform,rules:e.addrules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户帐号",prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入用户帐号，必须是英文且长度不能少于4位",size:"medium"},model:{value:e.addform.username,callback:function(t){e.$set(e.addform,"username",t)},expression:"addform.username"}})],1),r("el-form-item",{attrs:{label:"用户姓名",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入用户姓名",size:"medium"},model:{value:e.addform.name,callback:function(t){e.$set(e.addform,"name",t)},expression:"addform.name"}})],1),r("el-form-item",{attrs:{label:"输入密码",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码，长度不能少于6位",size:"medium"},model:{value:e.addform.password,callback:function(t){e.$set(e.addform,"password",t)},expression:"addform.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"password2"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入确认密码，长度不能少于6位",size:"medium"},model:{value:e.addform.password2,callback:function(t){e.$set(e.addform,"password2",t)},expression:"addform.password2"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.doAddUser()}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"修改用户密码",visible:e.pwdDialogVisible,"close-on-click-modal":!1,"modal-append-to-body":!1,width:"40%"},on:{"update:visible":function(t){e.pwdDialogVisible=t}}},[r("el-form",{ref:"pwdform",attrs:{model:e.pwdform,rules:e.pwdrules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户帐号",prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入用户帐号，必须是英文且长度不能少于4位",size:"medium",disabled:""},model:{value:e.pwdform.username,callback:function(t){e.$set(e.pwdform,"username",t)},expression:"pwdform.username"}})],1),r("el-form-item",{attrs:{label:"输入旧密码",prop:"oldpwd"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入旧密码",size:"medium"},model:{value:e.pwdform.oldpwd,callback:function(t){e.$set(e.pwdform,"oldpwd",t)},expression:"pwdform.oldpwd"}})],1),r("el-form-item",{attrs:{label:"输入新密码",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入新密码，长度不能少于6位",size:"medium"},model:{value:e.pwdform.password,callback:function(t){e.$set(e.pwdform,"password",t)},expression:"pwdform.password"}})],1),r("el-form-item",{attrs:{label:"确认新密码",prop:"password2"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入确认新密码，长度不能少于6位",size:"medium"},model:{value:e.pwdform.password2,callback:function(t){e.$set(e.pwdform,"password2",t)},expression:"pwdform.password2"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.pwdDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.doPwd()}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"修改用户",visible:e.editDialogVisible,"close-on-click-modal":!1,"modal-append-to-body":!1,width:"40%"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[r("el-form",{ref:"editform",attrs:{model:e.editform,rules:e.editrules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户编号",prop:"userid"}},[r("el-input",{attrs:{size:"medium",disabled:""},model:{value:e.editform.userid,callback:function(t){e.$set(e.editform,"userid",t)},expression:"editform.userid"}})],1),r("el-form-item",{attrs:{label:"用户帐号",prop:"username"}},[r("el-input",{attrs:{size:"medium",disabled:""},model:{value:e.editform.username,callback:function(t){e.$set(e.editform,"username",t)},expression:"editform.username"}})],1),r("el-form-item",{attrs:{label:"用户姓名",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入用户姓名",size:"medium"},model:{value:e.editform.name,callback:function(t){e.$set(e.editform,"name",t)},expression:"editform.name"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.doEditUser()}}},[e._v("确 定")])],1)],1)],1)},s=[],o=(r("ac1f"),r("00b4"),r("99af"),r("b0c0"),r("c24f")),i={name:"UserManage",data:function(){var e=this,t=function(e,t,r){var a=/^(\w){6,20}$/;return a.test(t)?r():r(new Error("至少6个字符，至少1个大写字母，1个小写字母和1个数字"))},r=function(t,r,a){return r===e.addform.password?a():a(new Error("再次输入的密码不一致"))},a=function(t,r,a){return r===e.pwdform.password?a():a(new Error("再次输入的密码不一致"))};return{loading:!1,addDialogVisible:!1,editDialogVisible:!1,pwdDialogVisible:!1,addform:{username:"",name:"",password:"",password2:""},pwdform:{username:"",name:"",oldpwd:"",password:"",password2:""},editform:{userid:"",username:"",name:""},addrules:{username:[{required:!0,message:"请输入用户帐号",trigger:"blur"}],name:[{required:!0,message:"请输入用户姓名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:t,trigger:"blur"}],password2:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:r,trigger:"blur"}]},pwdrules:{oldpwd:[{required:!0,message:"请输入旧密码",trigger:"blur"}],password:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:t,trigger:"blur"}],password2:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{validator:a,trigger:"blur"}]},editrules:{username:[{required:!0,message:"请输入用户帐号",trigger:"blur"}],name:[{required:!0,message:"请输入用户姓名",trigger:"blur"}]},list:[],count:0,pageSize:15,currentPage:1,pageshow:!0}},mounted:function(){this.handleQuery()},methods:{handleQuery:function(e){var t=this;this.pageshow=!1,this.queryUserList(),this.$nextTick((function(){t.pageshow=!0}))},handleSizeChange:function(e){this.pageSize=e,this.handleQuery()},handleCurrentChange:function(e){this.currentPage=e,this.handleQuery()},queryUserList:function(){var e=this;this.loading=!0,Object(o["i"])(this.currentPage,this.pageSize).then((function(t){e.loading=!1;var r=t.code,a=t.success,s=t.message,o=t.data;"200"===r&&a?(e.count=o.total,e.list=o.data,e.count>0&&0==e.list.length&&(e.currentPage=Math.ceil(e.count/e.pageSize),e.queryUserList())):e.$message({type:"error",message:s||"请求数据异常！"})})).catch((function(t){e.loading=!1,e.$message({type:"error",message:"请求异常！"}),console.log(t)}))},stopOrOpen:function(e,t){var r=this;this.loading=!0;var a=0===t?"停用":"启用";Object(o["e"])(e,t).then((function(t){r.loading=!1;var s=t.code,o=t.success,i=t.message;t.data;"200"===s&&o?(r.$message({type:"success",message:"".concat(a,"[").concat(e,"]成功！")}),r.handleQuery()):r.$message({type:"error",message:i||"请求数据异常！"})})).catch((function(e){r.loading=!1,r.$message({type:"error",message:"请求异常！"}),console.log(e)}))},openAddUserDialog:function(){this.addform.username="",this.addform.name="",this.addform.pwd1="",this.addform.pwd2="",this.addDialogVisible=!0},doAddUser:function(){var e=this,t={name:this.addform.username,fullname:this.addform.name,pwd1:this.addform.password,pwd2:this.addform.password2};this.$refs.addform.validate((function(r){if(!r)return!1;Object(o["a"])(t).then((function(r){e.loading=!1;var a=r.code,s=r.success,o=r.message;r.data;"200"===a&&s?(e.addDialogVisible=!1,e.$message({type:"success",message:"新增[".concat(t.username,"]成功！")}),e.handleQuery()):e.$message({type:"error",message:o||"请求数据异常！"})})).catch((function(t){e.loading=!1,e.$message({type:"error",message:"请求异常！"}),console.log(t)}))}))},openPwdDialog:function(e){this.pwdform.username=e.username,this.pwdform.name=e.name,this.pwdform.oldpwd="",this.pwdform.pwd1="",this.pwdform.pwd2="",this.pwdDialogVisible=!0},doPwd:function(){var e=this;this.$refs.pwdform.validate((function(t){if(!t)return!1;var r={name:e.pwdform.username,fullname:e.pwdform.name,oldPwd:e.pwdform.oldpwd,pwd1:e.pwdform.password,pwd2:e.pwdform.password2};Object(o["g"])(r).then((function(t){e.loading=!1;var a=t.code,s=t.success,o=t.message;t.data;"200"===a&&s?(e.pwdDialogVisible=!1,e.$message({type:"success",message:"修改[".concat(r.username,"]密码成功！")}),e.handleQuery()):e.$message({type:"error",message:o||"请求数据异常！"})})).catch((function(t){e.loading=!1,e.$message({type:"error",message:"请求异常！"}),console.log(t)}))}))},openUserDialog:function(e){this.editform.userid=e.id,this.editform.username=e.username,this.editform.name=e.name,this.editDialogVisible=!0},doEditUser:function(){var e=this;this.$refs.editform.validate((function(t){if(!t)return!1;var r={userid:e.editform.userid,fullname:e.editform.name};Object(o["h"])(r).then((function(t){e.loading=!1;var a=t.code,s=t.success,o=t.message;t.data;"200"===a&&s?(e.editDialogVisible=!1,e.$message({type:"success",message:"修改[".concat(r.username,"]成功！")}),e.handleQuery()):e.$message({type:"error",message:o||"请求数据异常！"})})).catch((function(t){e.loading=!1,e.$message({type:"error",message:"请求异常！"}),console.log(t)}))}))}}},l=i,n=(r("e5fe"),r("2877")),d=Object(n["a"])(l,a,s,!1,null,"cf1b57c8",null);t["default"]=d.exports},"38bb":function(e,t,r){},e5fe:function(e,t,r){"use strict";r("38bb")}}]);